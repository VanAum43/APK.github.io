<!DOCTYPE html>
<html>
<head>
<title>APK Security Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{margin:0;font-family:Segoe UI;background:#0f172a;color:#e5e7eb}
.sidebar{
 width:220px;height:100vh;position:fixed;
 background:#020617;padding:20px
}
.sidebar h2{color:#22d3ee;text-align:center}
.sidebar a{
 display:block;color:#cbd5f5;text-decoration:none;
 padding:10px;border-radius:6px;margin:6px 0
}
.sidebar a:hover{background:#1e293b}
.main{margin-left:240px;padding:25px}
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}
.card{background:#020617;padding:20px;border-radius:12px}
h3{color:#22d3ee}
table{width:100%;border-collapse:collapse;margin-top:20px}
th,td{padding:10px;border-bottom:1px solid #1e293b}
th{color:#38bdf8}
.blocked{color:#ef4444}
.safe{color:#22c55e}
.logout{
 margin-top:20px;
 background:#ef4444;
 padding:10px;
 border-radius:6px;
 text-align:center;
 cursor:pointer
}
</style>
</head>

<body>

<script>
if(localStorage.getItem("apk_auth")!=="true"){
    window.location="login.html";
}
</script>

<div class="sidebar">
<h2>APK Admin</h2>
<a>Dashboard</a>
<a>Attack Logs</a>
<a>Blocked IPs</a>
<a>Rules</a>
<div class="logout" onclick="logout()">Logout</div>
</div>

<div class="main">
<h1>Security Dashboard</h1>
<p>Status: <span class="safe">ACTIVE</span></p>

<div class="cards">
<div class="card"><h3>Total Requests</h3><p id="req">0</p></div>
<div class="card"><h3>Blocked Attacks</h3><p id="blk">0</p></div>
<div class="card"><h3>XSS</h3><p id="xss">0</p></div>
<div class="card"><h3>SQLi</h3><p id="sql">0</p></div>
</div>

<canvas id="chart" height="90"></canvas>

<table>
<thead>
<tr><th>Time</th><th>IP</th><th>Type</th><th>Status</th></tr>
</thead>
<tbody id="logs"></tbody>
</table>
</div>

<script>
let r=0,b=0,x=0,s=0;
const ctx=document.getElementById("chart");
const chart=new Chart(ctx,{
 type:"bar",
 data:{
  labels:["XSS","SQLi","Normal"],
  datasets:[{data:[0,0,0]}]
 }
});

function ip(){
 return Math.floor(Math.random()*255)+"."+Math.floor(Math.random()*255)+"."+Math.floor(Math.random()*255)+"."+Math.floor(Math.random()*255);
}

function add(){
 r++;
 const types=["XSS","SQLi","Normal"];
 const t=types[Math.floor(Math.random()*3)];
 const blocked=t!=="Normal";

 if(blocked)b++;
 if(t==="XSS")x++;
 if(t==="SQLi")s++;

 req.innerText=r; blk.innerText=b; xss.innerText=x; sql.innerText=s;

 chart.data.datasets[0].data=[x,s,r-b];
 chart.update();

 const tr=document.createElement("tr");
 tr.innerHTML=`<td>${new Date().toLocaleTimeString()}</td>
 <td>${ip()}</td>
 <td>${t}</td>
 <td class="${blocked?"blocked":"safe"}">${blocked?"Blocked":"Allowed"}</td>`;
 logs.prepend(tr);
 if(logs.rows.length>7)logs.deleteRow(7);
}

setInterval(add,2500);

function logout(){
 localStorage.removeItem("apk_auth");
 window.location="login.html";
}
</script>

</body>
</html>
